---
title: "[모두의 네트워크] 4장 네트워크 계층"
layout: single
categories: web
tag: [web, 네트워크, 모두의 네트워크]
toc: true #true/ false
toc_sticky: true
---

<br />

## 17. 네트워크 계층의 역할

### 네트워크간의 연결 구조

![이미지]({{ site.url }}{{ site.baseurl }}/assets/images/2021-12/08_1.png)

데이터 링크 계층에서는 네트워크 안에서의 통신만 가능하다. **네트워크 계층**에서는 이런 **네트워크간의 통신**이 가능하게 해준다. 그러기 위해서는 **라우터**라는 네트워크 장비가 필요하다.

MAC주소는 랜에서만 통신이 가능하고 네트워크에는 데이터를 보낼 수 없어서 네트워크를 식별할 다른 주소가 필요했고 그 역할을 IP주소가 해준다.

라우터는 **IP주소**로 목적지를 지정, 어떤경로로 보낼지 알려주는 기능을 한다. 이 과정들을 라우팅 이라고 한다. 라우터도 라우팅 테이블이 있으서 경로 정보를 등록하고 관리해준다.

### IP란?

네트워크 계층에서의 프로토콜이다. TCP/IP에서의 그 IP가 맞다.
아래는 네트워크 계층에서 캡슐화 할때 붙는 IP해더이다.


| :---: | :---: | :---: | :---: | :---: | :---: | :---: | :--: | :---: | :---: | :---: | :---: |
| 1.버전 | 2. 해더길이 | 3. 서비스 유형 | 4. 전체 패킷길이 | 5. ID일련번호 | 6. 조각상태 
| 7. 조각의 위치 | 8. TTL | 9. 프로토콜 | 10. 해더 체크섬 | 11. 출발지 IP 주소 | 12. 목적지 IP 주소 |


이런 순서로 해더의 정보가 구정되어있다. 이렇게 해더가 추가된 데이터를 **IP패킷** 이라고 한다.

## 18. IP주소의 구조

### IP 주소란?

이런 IP주소는 **인터넷 서비스 제공자(ISP)**에게 제공을 받는다. 우리가 지금 쓰는 SKT,KT,U+가 여기에 해당된다. 

- IP에는 **IPv4**와 **IPv6** 두가지 버전이 있다.
    - IPv4 : 32비트로 구성되어 있으며 IP주소를 약 43억개를 만들 수 있다. 하지만 인터넷이 널리 보급되면서 43억개도 부족해지며 IPv6를 만들게 되었다.
    - IPv6 : 128비트로 구성되어 있으며 IP주소를 약 340간 개를 만들 수 있다.
- **공인 IP 주소**와 **사설 IP주소** 가있다.
    
    ![이미지]({{ site.url }}{{ site.baseurl }}/assets/images/2021-12/08_2.png)
    
    - 공인 IP 주소 : 공인 주소는 ISP가 제공한다. 공인 IP주소는 사용할 수있는 숫자가 제한되므로 한대당 공인IP주소를 컴퓨터 대당 하나씩 할당해주기 어렵다.
    - 사설 IP 주소 : 라우터에만 공인 IP주소를 할당해주고 사설 IP주소는 랜의 네트워크 관리자가 자유롭게 사설 IP주소를 항당하거나 라우터의 DHCP기능을 사용해 자동 할당한다.
- IP주소는 **네트워크ID**와 **호스트ID**로 나뉜다.
    - 네트워크ID는 어떤 네트워크인지를 나타낸다.
    - 호스트 ID는 해당 네트워크의 어느 컴퓨터인지 나타낸다.

## 19. IP주소의 클래스 구조

### IP주소 구조

IP주소는 32비트 10진수로 표기한다. (8비트 = 1옥텟)
ex) 11000000 10101000 00000001 00001010 이렇게 4옥텟으로 표기한다. (1옥텟에 0~255까지 나타낼 수 있다.) → 10진수로 바꾸면 192.168.1.10 이런 식으로 나타나게 된다.

> ✨ cmd 에서 ipconfig 라고 치면 컴퓨터의 IP주소를 확인 할 수 있다.


### IP주소 클래스

| 클래스 이름 | 내용 | 네트워크ID + 호스트ID = 32비트 |
| :---: | :---: | :-----: |
| A 클래스 | 대규모 네트워크 주소 | 8비트 + 24비트 |
| B 클래스 | 중형 네트워크 주소 | 16비트 + 16비트 |
| C 클래스 | 소규모 네트워크 주소 | 24비트 + 8비트 |
| D 클래스 | 멀티캐스팅 주소 |  |
| E 클래스 | 연구 및 특수용도 주소 |  |

### 공인IP, 사설IP의 범위

| 클래스 이름 | 공인IP 주소의 범위 | 사설 IP 주소의 범위 |
| --- | --- | --- |
| A 클래스 | 1.0.0.0 ~ 9.255.255.255 <br /> 11.0.0.0 ~ 126.255.255.255 | 10.0.0.0 ~ 10.255.255.255 |
| B 클래스 | 128.0.0.0 ~ 172.15.255.255 <br /> 172.32.0.0 ~ 191.255.255.255 | 172.16.0.0 ~ 172.31.255.255 |
| C 클래스 | 192.0.0.0 ~ 192.167.255.255 <br /> 192.169.0.0 ~ 223.255.255.255 | 192.168.0.0 ~ 192.168.255.255 |

## 20. 네트워크 주소와 브로드캐스트 주소의 구조

### 네트워크 주소와 브로드캐스트 주소의 구조
- 네트워크 주소 : 네트워크 주소는 전체 네트워크에서 작은 네트워크를 식별하는데 사용된다.
네트워크 주소의 호스트ID 첫 번째 숫자가 0이면 네크워크 주소이다.
→ 192.168.1.0
- 브로드캐스트 주소 : 네트워크내의 모든 장비, 컴퓨터에게 데이터를 전송하는데 이용되는 IP 주소이다. 네트워크 주소의 호스트ID 맨마지막 숫자가 255이면 브로드캐스트 주소가 된다.
→ 192.168.1.255

## 21. 서브넷의 구조

### 서브넷이란?

A클래스와 같이 **대규모의 네트워크는 작은 규모의 네트워크로 분할**하여 블로드캐스트로 전송되는 패킷의 범위를 좁할 수 있다. 이렇게 분할하는것을 서브넷팅, 분할된 네트워크를 **서브넷** 이라한다.
그렇게 되면 기존 호스트ID가 나뉘어
- **32비트 = 네트워크ID + 서브넷ID + 호스트 ID** <br />
이렇게 IP 주소를 이루게 된다.

### 서브넷 마스크란?

IP주소를 서브넷팅까지 하면 어디까지가 네트워크ID이며,  어디까지 서브넷ID인지 판단하기 어려워진다. 그래서 서브넷 마스크가 나왔다.
**서브넷 마스크는 서브넷ID와 호스트ID를 식별하기 위한 값**이다.
A클래스는 255.0.0.0, B클래스는 255.255.0.0, C클래스는 255.255.255.0이 된다.
그외에 **프리픽스 표기법**도 있다. "/ 비트수 "로 나타낸다. 
→ A클래스 255.0.0.0을 프리픽스로는 /8 이렇게 나타낸다.

## 22. 라우터의 구조

### 라우터란?

라우터가 있어야만 다른 네트워크와 통신이 가능하다. 또한 네트워크 분리를 해준다.

이제 컴퓨터A가 데이터를 다른 컴퓨터로 보내려고 한다. 그러면 네트워크의 출입구를 설정(**기본 게이트웨이)**한다.  설정되면 컴퓨터A는 데이터를 라우터로 데이터를 전송한다.

### 라우팅이란?

라우팅은 지금 네트워크에서 다른 네트워크까지의 최적 경로를 통해 데이터를 전송한다. 이 정보들은 라우팅 테이블에 등록이된다. 이 테이블은 수동, 자동으로 등록이 된다.

이처럼 라우팅 정보를 교환하기 위한 프로토콜을 라우팅 프로토콜이라한다.
라우팅 프로토콜에는 RIP, OSPF,BGP등이 있다.

<br /><br /><br /><br />